{
  "comments": [
    {
      "key": {
        "uuid": "c4700952_22105408",
        "filename": "adb/file_sync_client.cpp",
        "patchSetId": 5
      },
      "lineNbr": 82,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2015-08-22T05:39:14Z",
      "side": 1,
      "message": "if (IsValid()) {SendQuit(); ShowTransferRate(); adb_close(fd);}  ??",
      "range": {
        "startLine": 82,
        "startChar": 4,
        "endLine": 82,
        "endChar": 21
      },
      "revId": "50568f3a098113ea9e18497170dc6878a769edf8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a47f9520_8997ee51",
        "filename": "adb/file_sync_client.cpp",
        "patchSetId": 5
      },
      "lineNbr": 82,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2015-08-22T06:26:06Z",
      "side": 1,
      "message": "the old code got away without closing these fds because we exit immediately after anyway, but, yeah, closing sounds like a good idea. done.",
      "parentUuid": "c4700952_22105408",
      "range": {
        "startLine": 82,
        "startChar": 4,
        "endLine": 82,
        "endChar": 21
      },
      "revId": "50568f3a098113ea9e18497170dc6878a769edf8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e4750d3f_8b6fe21e",
        "filename": "adb/file_sync_client.cpp",
        "patchSetId": 5
      },
      "lineNbr": 218,
      "author": {
        "id": 1079148
      },
      "writtenOn": "2015-08-22T01:10:41Z",
      "side": 1,
      "message": "It doesn\u0027t seem like sc.total_bytes gets zeroed except on construction of the class, and sync_send looks like it gets called multiple times with the same SyncConnection.",
      "revId": "50568f3a098113ea9e18497170dc6878a769edf8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e430ad80_13eec37f",
        "filename": "adb/file_sync_client.cpp",
        "patchSetId": 5
      },
      "lineNbr": 218,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2015-08-22T01:28:10Z",
      "side": 1,
      "message": "yeah, that\u0027s the idea. so for a pull/push where you only move one file, at the end you print the details for that one file; for an \"adb sync\" where you move a bunch of files, at the end you print the cumulative details for the whole lot.",
      "parentUuid": "e4750d3f_8b6fe21e",
      "revId": "50568f3a098113ea9e18497170dc6878a769edf8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c42ba915_c1887530",
        "filename": "adb/file_sync_client.cpp",
        "patchSetId": 5
      },
      "lineNbr": 218,
      "author": {
        "id": 1079148
      },
      "writtenOn": "2015-08-22T01:37:48Z",
      "side": 1,
      "message": "Ah, show_progress is false with multiple files, even with the -p flag.",
      "parentUuid": "e430ad80_13eec37f",
      "revId": "50568f3a098113ea9e18497170dc6878a769edf8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a47f9520_8965ae11",
        "filename": "adb/file_sync_client.cpp",
        "patchSetId": 5
      },
      "lineNbr": 404,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2015-08-22T05:39:14Z",
      "side": 1,
      "message": "false?",
      "range": {
        "startLine": 404,
        "startChar": 29,
        "endLine": 404,
        "endChar": 31
      },
      "revId": "50568f3a098113ea9e18497170dc6878a769edf8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "048f817d_58c78caa",
        "filename": "adb/file_sync_client.cpp",
        "patchSetId": 5
      },
      "lineNbr": 404,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2015-08-22T06:26:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a47f9520_8965ae11",
      "range": {
        "startLine": 404,
        "startChar": 29,
        "endLine": 404,
        "endChar": 31
      },
      "revId": "50568f3a098113ea9e18497170dc6878a769edf8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "048f817d_b88eb888",
        "filename": "adb/file_sync_client.cpp",
        "patchSetId": 5
      },
      "lineNbr": 474,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2015-08-22T07:00:30Z",
      "side": 1,
      "message": "by making me look at this again, you made me realize we do twice as many lstat calls as necessary. the next ps fixes that too.",
      "revId": "50568f3a098113ea9e18497170dc6878a769edf8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "048f817d_78c05095",
        "filename": "adb/file_sync_client.cpp",
        "patchSetId": 5
      },
      "lineNbr": 558,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2015-08-22T05:39:14Z",
      "side": 1,
      "message": "Is this what Josh is referring to? show_progress\u003dfalse for multiple files",
      "range": {
        "startLine": 558,
        "startChar": 83,
        "endLine": 558,
        "endChar": 88
      },
      "revId": "50568f3a098113ea9e18497170dc6878a769edf8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a47f9520_29a4bab9",
        "filename": "adb/file_sync_client.cpp",
        "patchSetId": 5
      },
      "lineNbr": 558,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2015-08-22T06:26:06Z",
      "side": 1,
      "message": "yes.",
      "parentUuid": "048f817d_78c05095",
      "range": {
        "startLine": 558,
        "startChar": 83,
        "endLine": 558,
        "endChar": 88
      },
      "revId": "50568f3a098113ea9e18497170dc6878a769edf8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "048f817d_d8ba9c27",
        "filename": "adb/file_sync_client.cpp",
        "patchSetId": 5
      },
      "lineNbr": 703,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2015-08-22T05:39:14Z",
      "side": 1,
      "message": "Is this what Josh is referring to? show_progress\u003dfalse for multiple files",
      "range": {
        "startLine": 703,
        "startChar": 48,
        "endLine": 703,
        "endChar": 53
      },
      "revId": "50568f3a098113ea9e18497170dc6878a769edf8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "248c8586_e6cedf28",
        "filename": "adb/file_sync_client.cpp",
        "patchSetId": 5
      },
      "lineNbr": 766,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2015-08-22T05:39:14Z",
      "side": 1,
      "message": "false?",
      "range": {
        "startLine": 766,
        "startChar": 30,
        "endLine": 766,
        "endChar": 31
      },
      "revId": "50568f3a098113ea9e18497170dc6878a769edf8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c42ba915_c1771578",
        "filename": "adb/file_sync_client.cpp",
        "patchSetId": 5
      },
      "lineNbr": 766,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2015-08-22T06:26:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "248c8586_e6cedf28",
      "range": {
        "startLine": 766,
        "startChar": 30,
        "endLine": 766,
        "endChar": 31
      },
      "revId": "50568f3a098113ea9e18497170dc6878a769edf8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "048f817d_9842d4c3",
        "filename": "adb/file_sync_service.cpp",
        "patchSetId": 5
      },
      "lineNbr": 166,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2015-08-22T05:39:14Z",
      "side": 1,
      "message": "If fail_errno() failed to write the error message, then we set fd\u003d-1 and continue? Seems odd? Maybe leave that to another day.",
      "range": {
        "startLine": 166,
        "startChar": 12,
        "endLine": 166,
        "endChar": 20
      },
      "revId": "50568f3a098113ea9e18497170dc6878a769edf8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c4700952_2229343a",
        "filename": "adb/file_sync_service.cpp",
        "patchSetId": 5
      },
      "lineNbr": 166,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2015-08-22T06:26:06Z",
      "side": 1,
      "message": "yeah, that does seem insane. i didn\u0027t notice that. especially because \u0027fd\u0027 is the locally-opened file, not the socket. and especially because if you get to the end of this function with fd \u003d\u003d -1, it returns true! i\u0027ll raise a bug to look at this.\n\nhandle_send_link uses fail_errno the way you\u0027d expect, but do_recv is weird too.",
      "parentUuid": "048f817d_9842d4c3",
      "range": {
        "startLine": 166,
        "startChar": 12,
        "endLine": 166,
        "endChar": 20
      },
      "revId": "50568f3a098113ea9e18497170dc6878a769edf8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c42ba915_218a89f8",
        "filename": "adb/file_sync_service.cpp",
        "patchSetId": 5
      },
      "lineNbr": 395,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2015-08-22T05:39:14Z",
      "side": 1,
      "message": "This should really be more like %c%c%c%c and msg.req.id[0-3] (or maybe something like %4s?), otherwise the current code assumes that there is magically a NULL byte at the start of the next field.",
      "range": {
        "startLine": 395,
        "startChar": 36,
        "endLine": 395,
        "endChar": 43
      },
      "revId": "50568f3a098113ea9e18497170dc6878a769edf8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e4750d3f_ce83b8e1",
        "filename": "adb/file_sync_service.cpp",
        "patchSetId": 5
      },
      "lineNbr": 395,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2015-08-22T06:26:06Z",
      "side": 1,
      "message": "ugh. it\u0027s not magic --- you\u0027ve hit on the explanation for L394. fucking C programmers.\n\ndone. L414 too.",
      "parentUuid": "c42ba915_218a89f8",
      "range": {
        "startLine": 395,
        "startChar": 36,
        "endLine": 395,
        "endChar": 43
      },
      "revId": "50568f3a098113ea9e18497170dc6878a769edf8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e430ad80_73c05795",
        "filename": "adb/file_sync_service.cpp",
        "patchSetId": 5
      },
      "lineNbr": 411,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2015-08-22T05:39:14Z",
      "side": 1,
      "message": "I think the D() above already outputs sync: \u0027QUIT\u0027...",
      "range": {
        "startLine": 411,
        "startChar": 8,
        "endLine": 411,
        "endChar": 27
      },
      "revId": "50568f3a098113ea9e18497170dc6878a769edf8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e430ad80_73729709",
        "filename": "adb/file_sync_service.cpp",
        "patchSetId": 5
      },
      "lineNbr": 411,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2015-08-22T06:26:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e430ad80_73c05795",
      "range": {
        "startLine": 411,
        "startChar": 8,
        "endLine": 411,
        "endChar": 27
      },
      "revId": "50568f3a098113ea9e18497170dc6878a769edf8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e430ad80_56b749bc",
        "filename": "adb/file_sync_service.h",
        "patchSetId": 5
      },
      "lineNbr": 39,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2015-08-23T22:37:48Z",
      "side": 1,
      "message": "ahhh, thanks for deleting this confusing never-used field.",
      "range": {
        "startLine": 39,
        "startChar": 4,
        "endLine": 39,
        "endChar": 16
      },
      "revId": "50568f3a098113ea9e18497170dc6878a769edf8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}