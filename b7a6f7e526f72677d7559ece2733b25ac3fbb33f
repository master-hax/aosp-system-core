{
  "comments": [
    {
      "key": {
        "uuid": "15c5111c_f4a2c118",
        "filename": "init/README.md",
        "patchSetId": 9
      },
      "lineNbr": 205,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2017-02-14T20:48:17Z",
      "side": 1,
      "message": "explicitly reference `cpuset`, and give an example of what `writepid` is still useful for?",
      "revId": "b7a6f7e526f72677d7559ece2733b25ac3fbb33f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6dffc43d_9b67de0d",
        "filename": "init/README.md",
        "patchSetId": 9
      },
      "lineNbr": 205,
      "author": {
        "id": 1076863
      },
      "writtenOn": "2017-02-14T23:06:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "15c5111c_f4a2c118",
      "revId": "b7a6f7e526f72677d7559ece2733b25ac3fbb33f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2c191a8f_f16d2a00",
        "filename": "init/service.cpp",
        "patchSetId": 9
      },
      "lineNbr": 58,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2017-02-14T20:48:17Z",
      "side": 1,
      "message": "static constexpr these instead.\n\nis \"tasks\" really worth a constant? seems harder to read with the constant than the literal.",
      "revId": "b7a6f7e526f72677d7559ece2733b25ac3fbb33f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "43ffeaca_da2e7e75",
        "filename": "init/service.cpp",
        "patchSetId": 9
      },
      "lineNbr": 58,
      "author": {
        "id": 1076863
      },
      "writtenOn": "2017-02-14T20:56:32Z",
      "side": 1,
      "message": "I\u0027ll fix the constexpr. As for \"tasks\" since it is used in a couple places (once when we remove /tasks from path in the old writepid instructions) and once when we add that to the file name when opening an fd I decided to have this in one place (since these are very related usages and should always be in sync). I mean, I don\u0027t feel strongly otherwise, but just wanted to explain my reasoning.",
      "parentUuid": "2c191a8f_f16d2a00",
      "revId": "b7a6f7e526f72677d7559ece2733b25ac3fbb33f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "425d24b0_32b5051a",
        "filename": "init/service.cpp",
        "patchSetId": 9
      },
      "lineNbr": 58,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2017-02-14T20:58:19Z",
      "side": 1,
      "message": "yeah, \"/dev/cpuset\" makes _some_ sense (though personally i wouldn\u0027t have bothered with that either), but a trivial literal like \"tasks\"...\n\n(what we really need is _tests_, but init\u0027s code is in no fit state for testing yet.)",
      "parentUuid": "43ffeaca_da2e7e75",
      "revId": "b7a6f7e526f72677d7559ece2733b25ac3fbb33f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ff4b3de6_975a210e",
        "filename": "init/service.cpp",
        "patchSetId": 9
      },
      "lineNbr": 58,
      "author": {
        "id": 1076863
      },
      "writtenOn": "2017-02-14T23:06:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2c191a8f_f16d2a00",
      "revId": "b7a6f7e526f72677d7559ece2733b25ac3fbb33f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c6b74410_9b5492fa",
        "filename": "init/service.cpp",
        "patchSetId": 9
      },
      "lineNbr": 58,
      "author": {
        "id": 1076863
      },
      "writtenOn": "2017-02-14T23:06:46Z",
      "side": 1,
      "message": "Ok, I have removed the kCpuSetTasks",
      "parentUuid": "425d24b0_32b5051a",
      "revId": "b7a6f7e526f72677d7559ece2733b25ac3fbb33f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "67a70b0c_ed06f3e9",
        "filename": "init/service.cpp",
        "patchSetId": 9
      },
      "lineNbr": 521,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2017-02-14T20:48:17Z",
      "side": 1,
      "message": "if you\u0027re going to do that, why warn? seems like we should either warn and not fix up, or fix up and not warn.",
      "revId": "b7a6f7e526f72677d7559ece2733b25ac3fbb33f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c0cec875_770a0fb9",
        "filename": "init/service.cpp",
        "patchSetId": 9
      },
      "lineNbr": 521,
      "author": {
        "id": 1076863
      },
      "writtenOn": "2017-02-14T20:56:32Z",
      "side": 1,
      "message": "Without fixing, I\u0027m afraid that this change can cause significant issues to vendor (closed-source) devices which we cannot fix ourselves. So I feel like fixing this up is important to make sure the devices continue to function. However I still wanted to let vendors know that then need to upgrade their init scripts...",
      "parentUuid": "67a70b0c_ed06f3e9",
      "revId": "b7a6f7e526f72677d7559ece2733b25ac3fbb33f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "117160c4_0b2f78ae",
        "filename": "init/service.cpp",
        "patchSetId": 9
      },
      "lineNbr": 521,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2017-02-14T20:58:48Z",
      "side": 1,
      "message": "how so? we haven\u0027t changed the meaning of writepid.",
      "parentUuid": "c0cec875_770a0fb9",
      "revId": "b7a6f7e526f72677d7559ece2733b25ac3fbb33f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "524a3fe9_67a55c31",
        "filename": "init/service.cpp",
        "patchSetId": 9
      },
      "lineNbr": 521,
      "author": {
        "id": 1076863
      },
      "writtenOn": "2017-02-14T22:34:17Z",
      "side": 1,
      "message": "Right now, if \u0027cpuset\u0027 is not set, then we try to put the process into a cpuset specified by the system default (in ro.cpuset.default system property). Now, consider a legacy file that uses writepid for cpusets. Since \u0027cpuset\u0027 wasn\u0027t specified and we do not have the current special code to filter out the /dev/cpuset/ from writepid, when we fork the process, the code (see line 660 below) will try to get the property value use that as the cpuset for the process.",
      "parentUuid": "117160c4_0b2f78ae",
      "revId": "b7a6f7e526f72677d7559ece2733b25ac3fbb33f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}