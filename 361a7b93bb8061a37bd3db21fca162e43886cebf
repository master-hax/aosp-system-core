{
  "comments": [
    {
      "key": {
        "uuid": "644d9e85_0476eb60",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2015-09-03T02:09:46Z",
      "side": 1,
      "message": "I think the reason D() used a lock was because there used to be two calls to fprintf(), but enh changed that recently. Base logging uses a lock around the logger.",
      "range": {
        "startLine": 10,
        "startChar": 0,
        "endLine": 10,
        "endChar": 85
      },
      "revId": "361a7b93bb8061a37bd3db21fca162e43886cebf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "64159e82_4599cab4",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2015-09-03T03:25:33Z",
      "side": 1,
      "message": "That makes sense.",
      "parentUuid": "644d9e85_0476eb60",
      "range": {
        "startLine": 10,
        "startChar": 0,
        "endLine": 10,
        "endChar": 85
      },
      "revId": "361a7b93bb8061a37bd3db21fca162e43886cebf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "44141a88_44670e5c",
        "filename": "adb/adb_trace.h",
        "patchSetId": 1
      },
      "lineNbr": 52,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2015-09-03T02:09:46Z",
      "side": 1,
      "message": "I was going to suggest removing the errno saving/restoring because I do that in LOG(), but I just tested it and I didn\u0027t do it correctly (damn, I should have written a test for it).",
      "range": {
        "startLine": 52,
        "startChar": 16,
        "endLine": 52,
        "endChar": 40
      },
      "revId": "361a7b93bb8061a37bd3db21fca162e43886cebf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "644d9e85_64b59f4e",
        "filename": "adb/adb_trace.h",
        "patchSetId": 1
      },
      "lineNbr": 52,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2015-09-03T03:25:33Z",
      "side": 1,
      "message": "yes, the errno has been saved in LOG(). But StringPrintf and __VA_ARGS__ may change errno (__VA_ARGS__ is possible to contain function calls). I don\u0027t know if there is any guarantee in c++ that LOG(INFO) can go strictly before its parameters following operator\u003c\u003c().",
      "parentUuid": "44141a88_44670e5c",
      "range": {
        "startLine": 52,
        "startChar": 16,
        "endLine": 52,
        "endChar": 40
      },
      "revId": "361a7b93bb8061a37bd3db21fca162e43886cebf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "64159e82_f91b3f79",
        "filename": "adb/adb_trace.h",
        "patchSetId": 1
      },
      "lineNbr": 52,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2015-09-03T23:22:57Z",
      "side": 1,
      "message": "Yeah, I\u0027ll put this on my list to investigate (or someone else can feel free to beat me to it).",
      "parentUuid": "644d9e85_64b59f4e",
      "range": {
        "startLine": 52,
        "startChar": 16,
        "endLine": 52,
        "endChar": 40
      },
      "revId": "361a7b93bb8061a37bd3db21fca162e43886cebf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e486eed4_1ef153cf",
        "filename": "adb/adb_trace.h",
        "patchSetId": 1
      },
      "lineNbr": 52,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2015-09-04T19:21:50Z",
      "side": 1,
      "message": "i don\u0027t understand the problem with the errno save/restore in \u003cbase/logging.h\u003e. that\u0027s how google3\u0027s logging works.",
      "parentUuid": "64159e82_f91b3f79",
      "range": {
        "startLine": 52,
        "startChar": 16,
        "endLine": 52,
        "endChar": 40
      },
      "revId": "361a7b93bb8061a37bd3db21fca162e43886cebf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "64159e82_5a3c0192",
        "filename": "adb/adb_trace.h",
        "patchSetId": 1
      },
      "lineNbr": 52,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2015-09-04T19:24:51Z",
      "side": 1,
      "message": "I tried a simple test case and it failed:\n\n  int myfunc() { errno \u003d 6666; return 0; }\n\n  errno \u003d 1337;\n  LOG(INFO) \u003c\u003c myfunc();\n  printf(\"errno: %d\\n\", errno);",
      "parentUuid": "e486eed4_1ef153cf",
      "range": {
        "startLine": 52,
        "startChar": 16,
        "endLine": 52,
        "endChar": 40
      },
      "revId": "361a7b93bb8061a37bd3db21fca162e43886cebf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "04cce27b_7d8550f8",
        "filename": "adb/adb_trace.h",
        "patchSetId": 1
      },
      "lineNbr": 52,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2015-09-06T00:33:39Z",
      "side": 1,
      "message": "Although I thought compilers are possible to call myfunc() first, I didn\u0027t expect that they really do that. But the test also fails on my workstation.",
      "parentUuid": "64159e82_5a3c0192",
      "range": {
        "startLine": 52,
        "startChar": 16,
        "endLine": 52,
        "endChar": 40
      },
      "revId": "361a7b93bb8061a37bd3db21fca162e43886cebf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a9692fe6_3768182a",
        "filename": "adb/adb_trace.h",
        "patchSetId": 1
      },
      "lineNbr": 52,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2015-09-17T08:00:49Z",
      "side": 1,
      "message": "I\u0027ve prototyped a fix to the errno restoring (and conditional logging). Hopefully should have a code review by Thurs or Fri for your consideration.",
      "parentUuid": "04cce27b_7d8550f8",
      "range": {
        "startLine": 52,
        "startChar": 16,
        "endLine": 52,
        "endChar": 40
      },
      "revId": "361a7b93bb8061a37bd3db21fca162e43886cebf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}