{
  "comments": [
    {
      "key": {
        "uuid": "0d897d5a_2a7dc68a",
        "filename": "fs_mgr/libfs_avb/avb_ops.cpp",
        "patchSetId": 2
      },
      "lineNbr": 189,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2019-01-11T18:47:26Z",
      "side": 1,
      "message": "Maybe check verify_result too?  Seems like that\u0027s the first check that\u0027s missing.",
      "revId": "6a56a2a94ff381479754436be9291c99d2b2bd27",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "46a2d4f9_44784bfa",
        "filename": "fs_mgr/libfs_avb/avb_ops.cpp",
        "patchSetId": 2
      },
      "lineNbr": 189,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2019-01-11T18:57:54Z",
      "side": 1,
      "message": "I think it is too complex to worry about verify_result values.\n\ntypedef enum {\n  AVB_SLOT_VERIFY_RESULT_OK,\n  AVB_SLOT_VERIFY_RESULT_ERROR_OOM,\n  AVB_SLOT_VERIFY_RESULT_ERROR_IO,\n  AVB_SLOT_VERIFY_RESULT_ERROR_VERIFICATION,\n  AVB_SLOT_VERIFY_RESULT_ERROR_ROLLBACK_INDEX,\n  AVB_SLOT_VERIFY_RESULT_ERROR_PUBLIC_KEY_REJECTED,\n  AVB_SLOT_VERIFY_RESULT_ERROR_INVALID_METADATA,\n  AVB_SLOT_VERIFY_RESULT_ERROR_UNSUPPORTED_VERSION,\n  AVB_SLOT_VERIFY_RESULT_ERROR_INVALID_ARGUMENT\n} AvbSlotVerifyResult;\n\nSome of these can return with, or without, data if flags has AVB_SLOT_VERIFY_FLAGS_ALLOW_VERIFICATION_ERROR set and coding something here would result in too much knowledge regarding libavb\u0027s implementation details?",
      "parentUuid": "0d897d5a_2a7dc68a",
      "revId": "6a56a2a94ff381479754436be9291c99d2b2bd27",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "13f70fbe_d0a67b5d",
        "filename": "fs_mgr/libfs_avb/avb_ops.cpp",
        "patchSetId": 2
      },
      "lineNbr": 189,
      "author": {
        "id": 1064128
      },
      "writtenOn": "2019-01-11T19:09:40Z",
      "side": 1,
      "message": "I figure anything except AVB_SLOT_VERIFY_RESULT_OK may be bad and worth returning if they happened?  Let\u0027s see what Bowgo has to say.",
      "parentUuid": "46a2d4f9_44784bfa",
      "revId": "6a56a2a94ff381479754436be9291c99d2b2bd27",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9f8097d5_c099be86",
        "filename": "fs_mgr/libfs_avb/avb_ops.cpp",
        "patchSetId": 2
      },
      "lineNbr": 189,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2019-01-11T19:20:34Z",
      "side": 1,
      "message": "K got it, so from fs_mgr API perspective, partial results are of no interest.\n\nif ((verify_result !\u003d AVB_SLOT_VERIFY_RESULT_OK) || !avb_slot_data) {\n  if (avb_slot_data) avb_slot_verify_data_free(avb_slot_data);\n  return verify_result;\n}",
      "parentUuid": "13f70fbe_d0a67b5d",
      "revId": "6a56a2a94ff381479754436be9291c99d2b2bd27",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}