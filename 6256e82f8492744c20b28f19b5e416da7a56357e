{
  "comments": [
    {
      "key": {
        "uuid": "3f8fa133_bb86ff06",
        "filename": "fastboot/Android.mk",
        "patchSetId": 2
      },
      "lineNbr": 36,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2017-02-15T19:17:23Z",
      "side": 1,
      "message": "|sort",
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2934b8aa_1639c214",
        "filename": "fastboot/Android.mk",
        "patchSetId": 2
      },
      "lineNbr": 36,
      "author": {
        "id": 1138338
      },
      "writtenOn": "2017-02-15T23:22:06Z",
      "side": 1,
      "message": "sure",
      "parentUuid": "3f8fa133_bb86ff06",
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e2a1609d_ee125c3d",
        "filename": "fastboot/fastboot.cpp",
        "patchSetId": 2
      },
      "lineNbr": 69,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2017-02-15T19:17:23Z",
      "side": 1,
      "message": "|sort",
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a44d3631_476221ef",
        "filename": "fastboot/fastboot.cpp",
        "patchSetId": 2
      },
      "lineNbr": 69,
      "author": {
        "id": 1138338
      },
      "writtenOn": "2017-02-15T23:22:06Z",
      "side": 1,
      "message": "sure",
      "parentUuid": "e2a1609d_ee125c3d",
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3e62b67f_571e23bb",
        "filename": "fastboot/fastboot.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1427,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2017-02-15T19:17:23Z",
      "side": 1,
      "message": "static",
      "range": {
        "startLine": 1427,
        "startChar": 0,
        "endLine": 1427,
        "endChar": 3
      },
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "454cfae7_540b5a0c",
        "filename": "fastboot/fastboot.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1427,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2017-02-15T19:17:23Z",
      "side": 1,
      "message": "const\u0026",
      "range": {
        "startLine": 1427,
        "startChar": 23,
        "endLine": 1427,
        "endChar": 34
      },
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e27ea01a_394146ff",
        "filename": "fastboot/fastboot.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1427,
      "author": {
        "id": 1138338
      },
      "writtenOn": "2017-02-15T23:22:06Z",
      "side": 1,
      "message": "ok",
      "parentUuid": "3e62b67f_571e23bb",
      "range": {
        "startLine": 1427,
        "startChar": 0,
        "endLine": 1427,
        "endChar": 3
      },
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "95300466_5c0a80bf",
        "filename": "fastboot/fastboot.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1430,
      "author": {
        "id": 1078119
      },
      "writtenOn": "2017-02-15T20:55:22Z",
      "side": 1,
      "message": "Restrict variables to the smallest block in which they are used (in this case, declare tmp inside the \"for\" clause).",
      "range": {
        "startLine": 1430,
        "startChar": 4,
        "endLine": 1430,
        "endChar": 32
      },
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "be6f684d_0e561f92",
        "filename": "fastboot/fastboot.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1430,
      "author": {
        "id": 1138338
      },
      "writtenOn": "2017-02-15T23:22:06Z",
      "side": 1,
      "message": "ok",
      "parentUuid": "95300466_5c0a80bf",
      "range": {
        "startLine": 1430,
        "startChar": 4,
        "endLine": 1430,
        "endChar": 32
      },
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ff66ff17_175fa5af",
        "filename": "fastboot/fastboot.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1432,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2017-02-15T19:17:23Z",
      "side": 1,
      "message": "std::vector",
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8676ce35_fb0bfa97",
        "filename": "fastboot/fastboot.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1432,
      "author": {
        "id": 1138338
      },
      "writtenOn": "2017-02-15T23:22:06Z",
      "side": 1,
      "message": "ok",
      "parentUuid": "ff66ff17_175fa5af",
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1dd5ff52_c967abd1",
        "filename": "fastboot/fastboot.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1434,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2017-02-15T19:17:23Z",
      "side": 1,
      "message": "https://google.github.io/styleguide/cppguide.html#Conditionals",
      "range": {
        "startLine": 1433,
        "startChar": 0,
        "endLine": 1434,
        "endChar": 18
      },
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d23211c9_71104418",
        "filename": "fastboot/fastboot.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1434,
      "author": {
        "id": 1138338
      },
      "writtenOn": "2017-02-15T23:22:06Z",
      "side": 1,
      "message": "seems to complaint with coding styles you pointed out. I think you want:\n\nif (!tables) return -1;\n\nok for me",
      "parentUuid": "1dd5ff52_c967abd1",
      "range": {
        "startLine": 1433,
        "startChar": 0,
        "endLine": 1434,
        "endChar": 18
      },
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c04b0023_e608a590",
        "filename": "fastboot/fastboot.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1444,
      "author": {
        "id": 1078119
      },
      "writtenOn": "2017-02-15T20:55:22Z",
      "side": 1,
      "message": "This is more of a debug-only diagnostic message and probably shouldn\u0027t be unconditionally printed. I don\u0027t think fastboot has any modern logging utilities at the moment so suggest either removing or commenting this out for now.",
      "range": {
        "startLine": 1444,
        "startChar": 8,
        "endLine": 1444,
        "endChar": 76
      },
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4d732d2f_ca10bb3e",
        "filename": "fastboot/fastboot.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1444,
      "author": {
        "id": 1138338
      },
      "writtenOn": "2017-02-15T23:22:06Z",
      "side": 1,
      "message": "removing is ok",
      "parentUuid": "c04b0023_e608a590",
      "range": {
        "startLine": 1444,
        "startChar": 8,
        "endLine": 1444,
        "endChar": 76
      },
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2edf7953_b16c710c",
        "filename": "fastboot/fastboot.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1759,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2017-02-15T19:17:23Z",
      "side": 1,
      "message": "make this a new top-level command instead.",
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6a59b23c_0e4c7aff",
        "filename": "fastboot/fastboot.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1759,
      "author": {
        "id": 1138338
      },
      "writtenOn": "2017-02-15T23:22:06Z",
      "side": 1,
      "message": "ok",
      "parentUuid": "2edf7953_b16c710c",
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2e63a23e_67b55a8f",
        "filename": "fastboot/partition.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2017-02-15T19:17:23Z",
      "side": 1,
      "message": "copyright header",
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4486500b_16f373f0",
        "filename": "fastboot/partition.cpp",
        "patchSetId": 2
      },
      "lineNbr": 1,
      "author": {
        "id": 1138338
      },
      "writtenOn": "2017-02-15T23:22:06Z",
      "side": 1,
      "message": "sure",
      "parentUuid": "2e63a23e_67b55a8f",
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4aec422a_c177e96f",
        "filename": "fastboot/partition.cpp",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2017-02-15T19:17:23Z",
      "side": 1,
      "message": "not needed in C++\n\n(also, names starting __ are not yours)",
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "89234111_0c9ed7da",
        "filename": "fastboot/partition.cpp",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1138338
      },
      "writtenOn": "2017-02-15T23:22:06Z",
      "side": 1,
      "message": "no sure what is not needed. the macro? is there another way to tell the compiler some parameter may not be used? basically remove this error:\n\nsystem/core/fastboot/partition.cpp:101:33: error: unused parameter \u0027data\u0027 [-Werror,-Wunused-parameter]\nstatic void start_element(void *data, const char *element,",
      "parentUuid": "4aec422a_c177e96f",
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a55c96d4_2069f1af",
        "filename": "fastboot/partition.cpp",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2017-02-15T23:25:37Z",
      "side": 1,
      "message": "just don\u0027t name the argument(s) you don\u0027t want:\n\n  int main(int, char* argv[]) {",
      "parentUuid": "89234111_0c9ed7da",
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6657ac99_2382b242",
        "filename": "fastboot/partition.cpp",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1138338
      },
      "writtenOn": "2017-02-16T01:48:18Z",
      "side": 1,
      "message": "great",
      "parentUuid": "a55c96d4_2069f1af",
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "95e7822b_455c9451",
        "filename": "fastboot/partition.cpp",
        "patchSetId": 2
      },
      "lineNbr": 17,
      "author": {
        "id": 1078119
      },
      "writtenOn": "2017-02-15T20:55:22Z",
      "side": 1,
      "message": "In general, try to avoid abbreviations for names (https://google.github.io/styleguide/cppguide.html#General_Naming_Rules).",
      "range": {
        "startLine": 17,
        "startChar": 37,
        "endLine": 17,
        "endChar": 40
      },
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9b5d8ea8_b7a6b548",
        "filename": "fastboot/partition.cpp",
        "patchSetId": 2
      },
      "lineNbr": 17,
      "author": {
        "id": 1138338
      },
      "writtenOn": "2017-02-15T23:22:06Z",
      "side": 1,
      "message": "ok",
      "parentUuid": "95e7822b_455c9451",
      "range": {
        "startLine": 17,
        "startChar": 37,
        "endLine": 17,
        "endChar": 40
      },
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6c5929b2_96ea94f2",
        "filename": "fastboot/partition.cpp",
        "patchSetId": 2
      },
      "lineNbr": 142,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2017-02-15T19:17:23Z",
      "side": 1,
      "message": "std::vector",
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d0d7d9f9_ba233beb",
        "filename": "fastboot/partition.cpp",
        "patchSetId": 2
      },
      "lineNbr": 142,
      "author": {
        "id": 1138338
      },
      "writtenOn": "2017-02-15T23:22:06Z",
      "side": 1,
      "message": "ok",
      "parentUuid": "6c5929b2_96ea94f2",
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a574b3d6_03100148",
        "filename": "fastboot/partition.cpp",
        "patchSetId": 2
      },
      "lineNbr": 171,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2017-02-15T19:17:23Z",
      "side": 1,
      "message": "std::unique_ptr",
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae1f9d61_737c40f8",
        "filename": "fastboot/partition.cpp",
        "patchSetId": 2
      },
      "lineNbr": 171,
      "author": {
        "id": 1138338
      },
      "writtenOn": "2017-02-15T23:22:06Z",
      "side": 1,
      "message": "ok",
      "parentUuid": "a574b3d6_03100148",
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3870c586_5d6bf72b",
        "filename": "fastboot/partition.h",
        "patchSetId": 2
      },
      "lineNbr": 18,
      "author": {
        "id": 1078119
      },
      "writtenOn": "2017-02-15T20:55:22Z",
      "side": 1,
      "message": "Is the data format used here a standard defined somewhere else or did you come up with this? If it\u0027s a standard, please reference the documentation. If not, I think we\u0027re going to need to at least add some versioning support in case we decide we need larger buffers or additional data later on.",
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "20b6a5e6_3a6bd1e5",
        "filename": "fastboot/partition.h",
        "patchSetId": 2
      },
      "lineNbr": 18,
      "author": {
        "id": 1138338
      },
      "writtenOn": "2017-02-15T23:22:06Z",
      "side": 1,
      "message": "No standard. it should be generic for partition tables we can support. Right now it only supports GPT, so it seems to similar to a GPT header. But is support is added for more Partition tables formats fields missing can be added. I can add a version field, no problem.",
      "parentUuid": "3870c586_5d6bf72b",
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ce3ea52c_12658b59",
        "filename": "fastboot/partition.h",
        "patchSetId": 2
      },
      "lineNbr": 28,
      "author": {
        "id": 1078119
      },
      "writtenOn": "2017-02-15T20:55:22Z",
      "side": 1,
      "message": "Prefer enums to macros when possible, and keep internal details that other files don\u0027t need in the implementation (.cpp) file instead of the header.",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 28,
        "endChar": 30
      },
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "17fccc48_bd9d0475",
        "filename": "fastboot/partition.h",
        "patchSetId": 2
      },
      "lineNbr": 28,
      "author": {
        "id": 1138338
      },
      "writtenOn": "2017-02-15T23:22:06Z",
      "side": 1,
      "message": "I thought about that. However, as the is not guarantee of the enum size for different compilers I cannot define field type inside struct partition table as enum partition_type type. it still would need to be uint32_t. I was not sure about compilation warnings or cast requirement. Also, that did not look good to me. But I can create the enum, no problem.",
      "parentUuid": "ce3ea52c_12658b59",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 28,
        "endChar": 30
      },
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f4932b1c_e302a8cc",
        "filename": "fastboot/partition.h",
        "patchSetId": 2
      },
      "lineNbr": 28,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2017-02-15T23:25:37Z",
      "side": 1,
      "message": "c++11 allows you to specify the underlying type:\n\nhttp://en.cppreference.com/w/cpp/language/enum",
      "parentUuid": "17fccc48_bd9d0475",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 28,
        "endChar": 30
      },
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "73a4c174_fd948949",
        "filename": "fastboot/partition.h",
        "patchSetId": 2
      },
      "lineNbr": 28,
      "author": {
        "id": 1138338
      },
      "writtenOn": "2017-02-16T01:48:18Z",
      "side": 1,
      "message": "perfect. thanks",
      "parentUuid": "f4932b1c_e302a8cc",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 28,
        "endChar": 30
      },
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8998c1b9_93c7063e",
        "filename": "fastboot/partition.h",
        "patchSetId": 2
      },
      "lineNbr": 48,
      "author": {
        "id": 1078119
      },
      "writtenOn": "2017-02-15T20:55:22Z",
      "side": 1,
      "message": "What do you think about making this into a C++ class instead for better usability and readability? I get that we want to transfer this data as a buffer, but keeping all these variables with vague names in a struct makes it quite difficult to figure out what\u0027s actually happening here. IMO it would be cleaner to store these things as simply as possible, and only pack them into the transmit format on-demand.\n\nMaybe something like this:\n\n  class Partition {\n   public:\n    ...\n\n    // Pack the partition into the required format\n    // to transmit to the device.\n    std::vector\u003cuint8_t\u003e Serialize() const;\n  };\n\n  class PartitionTable {\n   public:\n    PartitionTable(const std::string\u0026 file_path);\n\n    const std::vector\u003cPartition\u003e\u0026 partitions() const;\n\n    ...\n  }\n\nThis way usage can be a little simpler:\n\n  PartitionTable table(\u003cfile\u003e);\n  fastboot_buffer fb_buffer;\n  fb_buffer.type \u003d FB_BUFFER;\n  for (const Partition\u0026 partition : table.partitions()) {\n    std::vector\u003cuint8_t\u003e data \u003d partition.Serialize();\n    fb_buffer.data \u003d data.data();\n    fb_buffer.sz \u003d data.size();\n    flash_buf(...);\n  }",
      "range": {
        "startLine": 30,
        "startChar": 0,
        "endLine": 48,
        "endChar": 30
      },
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0d8e0231_3b628353",
        "filename": "fastboot/partition.h",
        "patchSetId": 2
      },
      "lineNbr": 48,
      "author": {
        "id": 1138338
      },
      "writtenOn": "2017-02-15T23:22:06Z",
      "side": 1,
      "message": "I can definitely give it a try. Just a couple of questions since I am not much familiar with C++. Should Serialize() method return a reference to std::vector\u003cuint8_t\u003e instead? Do I need to take care of freeing the serialized memory? or it will be free when there are not more references to it? Also, in the code I don\u0027t see where the memory assigned to fastboot_buffer.data is freed.\n\nI can even put a free after fb_download_data\n\nif (a-\u003eop \u003d\u003d OP_DOWNLOAD) {\n            status \u003d fb_download_data(transport, a-\u003edata, a-\u003esize);\n            status \u003d a-\u003efunc(a, status, status ? fb_get_error().c_str() : \"\");\n            if (status) break;\n            free(a-data);   // \u003c-free added\n\nAnd there is not complain about freeing the buffer twice, does that means it is not explicitly freed? memory leak?",
      "parentUuid": "8998c1b9_93c7063e",
      "range": {
        "startLine": 30,
        "startChar": 0,
        "endLine": 48,
        "endChar": 30
      },
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f8d45e03_5dc0cf09",
        "filename": "fastboot/partition.h",
        "patchSetId": 2
      },
      "lineNbr": 48,
      "author": {
        "id": 1078119
      },
      "writtenOn": "2017-02-16T01:16:15Z",
      "side": 1,
      "message": "std::vector is nice because you don\u0027t have to worry about freeing memory - as soon as it goes out of scope it will take care of that for you.\n\nI think either returning a reference to an existing vector would be fine, it sort of depends on how you want to implement it. If you want to maintain a vector internally at construction you can just return a const reference to it, or you can generate a new one on the fly - the performance impact will be negligible either way for such a small amount of data.\n\nI wrote up some sample code at http://gpaste/5825712112009216 that might give some ideas how it could work to generate a new vector and return it each time. It\u0027s not the only feasible approach and isn\u0027t super clean but hopefully will be enough to give you something to go on.",
      "parentUuid": "0d8e0231_3b628353",
      "range": {
        "startLine": 30,
        "startChar": 0,
        "endLine": 48,
        "endChar": 30
      },
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f9375979_05c3aff4",
        "filename": "fastboot/partition.h",
        "patchSetId": 2
      },
      "lineNbr": 50,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2017-02-15T19:17:23Z",
      "side": 1,
      "message": "std::vector",
      "range": {
        "startLine": 50,
        "startChar": 7,
        "endLine": 50,
        "endChar": 22
      },
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "12c45c29_21267626",
        "filename": "fastboot/partition.h",
        "patchSetId": 2
      },
      "lineNbr": 50,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2017-02-15T19:17:23Z",
      "side": 1,
      "message": "\u0026\n\nmissing #include \u003cstring\u003e",
      "range": {
        "startLine": 50,
        "startChar": 56,
        "endLine": 50,
        "endChar": 62
      },
      "revId": "6256e82f8492744c20b28f19b5e416da7a56357e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}